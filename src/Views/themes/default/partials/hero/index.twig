{% set allowed_hero_types = ['banner', 'slider', 'headline'] %}
{% set resolved_hero_type = hero_type ?? shop.hero_type ?? 'banner' %}
{% if resolved_hero_type not in allowed_hero_types %}
    {% set resolved_hero_type = '' %}
{% endif %}
{% set resolved_settings = hero_settings[resolved_hero_type] ?? {} %}
{% set hero_content = resolved_settings.content ?? {} %}
{% set has_banner = hero_content.title and hero_content.image %}
{% set has_headline = hero_content.title and hero_content.description %}
{% set has_slider = false %}
{% for slide in resolved_settings.slides ?? [] %}
    {% if slide.image %}
        {% set has_slider = true %}
    {% endif %}
{% endfor %}
{% set has_hero = (resolved_hero_type == 'banner' and has_banner)
    or (resolved_hero_type == 'headline' and has_headline)
    or (resolved_hero_type == 'slider' and has_slider) %}
{% if resolved_hero_type and has_hero %}
    <section>
        {% include 'partials/hero/' ~ resolved_hero_type ~ '.twig' with {
            hero_settings: resolved_settings ?? {},
            shop: shop
        } only %}
    </section>
{% else %}
    <section class="card bg-base-200/60 border border-base-300">
        <div class="card-body">
            <p class="text-sm uppercase tracking-wide text-base-content/60">Welcome to {{ shop.shop_name }}</p>
            <h1 class="text-4xl md:text-5xl font-bold text-base-content">{{ shop.shop_name }}</h1>
            {% if shop.shop_description %}
                <p class="text-base-content/70 max-w-2xl">{{ shop.shop_description }}</p>
            {% else %}
                <p class="text-base-content/70 max-w-2xl">Curated essentials, trending drops, and quality picks for every lifestyle.</p>
            {% endif %}
            <div class="card-actions">
                <a href="/products" class="btn btn-primary">Shop Now</a>
                <a href="/collections/new" class="btn btn-outline btn-primary">Browse New</a>
            </div>
        </div>
    </section>
{% endif %}
